<div class="calendar-container">
  <div class="grid">
    <div class="col-12 lg:col-8">
      <p-card styleClass="calendar-card fadein animation-duration-1000">
        <full-calendar [options]="calendarOptions"></full-calendar>
      </p-card>
    </div>

    <div class="col-12 lg:col-4 fadein animation-duration-1000">
      <p-card
        [header]="viewTurn ? 'Visualizar Turno' : 'Registrar Turno'"
        styleClass="form-card"
      >
        <ng-container *ngIf="!viewTurn; else viewTurnTemplate">
          <form [formGroup]="appointmentForm" class="appointment-form">
            <div class="field">
              <label for="name">Nombre y Apellido</label>
              <input
                id="name"
                type="text"
                pInputText
                formControlName="name"
                class="w-full"
                placeholder="Ej. Lionel Messi"
                autocomplete="off"
              />
            </div>

            <div class="field">
              <label for="dni">DNI</label>
              <input
                id="dni"
                type="number"
                pInputText
                formControlName="dni"
                class="w-full"
                placeholder="Ingrese su DNI sin guiones ni puntos"
                autocomplete="off"
              />
            </div>

            <div class="field">
              <label for="date">Fecha</label>
              <p-calendar
                id="date"
                formControlName="date"
                [showIcon]="true"
                dateFormat="dd-mm-yy"
                styleClass="w-full calendar-input"
                placeholder="Seleccionar fecha"
              ></p-calendar>
            </div>

            <div class="field">
              <label for="time">Hora</label>
              <p-dropdown
                id="time"
                formControlName="time"
                [options]="timeOptions"
                placeholder="Seleccionar hora"
                styleClass="w-full"
              ></p-dropdown>
            </div>

            <div class="field">
              <label for="description">Descripción</label>
              <textarea
                id="description"
                pInputTextarea
                formControlName="description"
                rows="3"
                class="w-full"
                placeholder="Ej. Detalles sobre el turno"
              ></textarea>
            </div>

            <p-button
              type="submit"
              (onClick)="onSubmit()"
              [disabled]="!appointmentForm.valid"
              label="Guardar Turno"
              styleClass="w-full minimal-button"
            ></p-button>
          </form>
        </ng-container>

        <ng-template #viewTurnTemplate>
          <div class="field">
            <label>Nombre y Apellido</label>
            <p>{{ selectedAppointment?.name }}</p>
          </div>

          <div class="field">
            <label>Fecha</label>
            <p>{{ selectedAppointment?.date | date : "dd-MM-yyyy" }}</p>
          </div>

          <div class="field">
            <label>Horario</label>
            <p>{{ selectedAppointment?.time | date : "hh:mm a" }}</p>
          </div>

          <div class="field">
            <label>Descripción</label>
            <p>{{ selectedAppointment?.description }}</p>
          </div>
        </ng-template>
      </p-card>
    </div>
  </div>
</div>
<p-toast />
