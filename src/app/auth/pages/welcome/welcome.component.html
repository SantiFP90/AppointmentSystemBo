<div class="welcome-container">
  <!-- Header with Logo -->
  <div class="welcome-header" [@slideIn]>
    <div class="logo-container">
      <h1 class="m-0 p-0">Mi TunerOnline</h1>
    </div>
  </div>

  <!-- Main Content Card -->
  <div class="main-card" [@slideIn]>
    <!-- Welcome Screen -->
    <div *ngIf="!showLogin()" class="welcome-content">
      <div class="welcome-options">
        <!-- Guest Option -->
        <div
          class="option-card guest-option"
          [@slideInLeft]
          pRipple
          (click)="goToGuestCalendar()"
        >
          <div class="option-content">
            <div class="option-icon">
              <i class="pi pi-users"></i>
            </div>
            <div class="option-info">
              <h3>Ir al Calendario como Invitado</h3>
              <p>Reserva tu turno sin necesidad de registro</p>
              <div class="option-features">
                <span class="feature">
                  <i class="pi pi-check"></i>
                  Acceso rápido
                </span>
                <span class="feature">
                  <i class="pi pi-check"></i>
                  Sin registro
                </span>
                <span class="feature">
                  <i class="pi pi-check"></i>
                  Fácil y rápido
                </span>
              </div>
            </div>
            <div class="option-arrow">
              <i class="pi pi-arrow-right"></i>
            </div>
          </div>
        </div>

        <!-- Client Login Option -->
        <div
          class="option-card client-option"
          [@slideInRight]
          pRipple
          (click)="showLoginForm()"
        >
          <div class="option-content">
            <div class="option-icon">
              <i class="pi pi-user"></i>
            </div>
            <div class="option-info">
              <h3>Ya Soy Cliente</h3>
              <p>Accede con tu cuenta para ver tu historial</p>
              <div class="option-features">
                <span class="feature">
                  <i class="pi pi-check"></i>
                  Historial completo
                </span>
                <span class="feature">
                  <i class="pi pi-check"></i>
                  Solo seleccionar cita
                </span>
                <span class="feature">
                  <i class="pi pi-check"></i>
                  Perfil autocompletado
                </span>
              </div>
            </div>
            <div class="option-arrow">
              <i class="pi pi-arrow-right"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Additional Info -->
      <div class="additional-info" [@fadeInUp]>
        <div class="info-item">
          <i class="pi pi-shield"></i>
          <span>Datos seguros y protegidos</span>
        </div>
        <div class="info-item">
          <i class="pi pi-mobile"></i>
          <span>Optimizado para móviles</span>
        </div>
        <div class="info-item">
          <i class="pi pi-clock"></i>
          <span>Disponible 24/7</span>
        </div>
      </div>
    </div>

    <!-- Login Screen -->
    <div *ngIf="showLogin()" class="login-content" [@slideIn]>
      <div class="login-header">
        <div class="back-button" (click)="backToWelcome()" pRipple>
          <i class="pi pi-arrow-left"></i>
        </div>
        <div class="login-title">
          <div class="login-icon">
            <i class="pi pi-sign-in"></i>
          </div>
          <h2>Iniciar Sesión</h2>
          <p>Accede a tu cuenta de cliente</p>
        </div>
      </div>

      <!-- Login Form -->
      <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="login-form">
        <!-- Username Field -->
        <div class="field">
          <label for="username">Usuario</label>
          <div class="input-wrapper">
            <i class="pi pi-user input-icon"></i>
            <input
              id="username"
              type="text"
              pInputText
              formControlName="username"
              placeholder="Ingresa tu usuario"
              [class.p-invalid]="isFieldInvalid('username')"
              autocomplete="username"
            />
          </div>
          <small class="error-message" *ngIf="isFieldInvalid('username')">
            {{ getFieldError("username") }}
          </small>
        </div>

        <!-- Password Field -->
        <div class="field">
          <label for="password">Contraseña</label>
          <div class="password-wrapper">
            <i class="pi pi-lock input-icon"></i>
            <p-password
              id="password"
              formControlName="password"
              placeholder="Ingresa tu contraseña"
              [class.p-invalid]="isFieldInvalid('password')"
              [feedback]="false"
              [toggleMask]="true"
              autocomplete="current-password"
              styleClass="custom-password"
              inputStyleClass="password-input"
            >
            </p-password>
          </div>
          <small class="error-message" *ngIf="isFieldInvalid('password')">
            {{ getFieldError("password") }}
          </small>
        </div>

        <!-- Login Button -->
        <div class="login-actions">
          <p-button
            type="submit"
            label="Iniciar Sesión"
            icon="pi pi-sign-in"
            iconPos="right"
            [loading]="isLoading()"
            [disabled]="!loginForm.valid || isLoading()"
            styleClass="login-button"
          >
          </p-button>
        </div>

        <!-- Additional Options -->
        <div class="additional-options">
          <p-divider align="center">
            <span>¿Primera vez?</span>
          </p-divider>

          <div class="demo-section">
            <p class="demo-text">Para probar el sistema:</p>
            <p-button
              label="Usar datos de demostración"
              icon="pi pi-play"
              severity="secondary"
              size="small"
              (click)="demoLogin()"
              [disabled]="isLoading()"
            >
            </p-button>
          </div>
        </div>
      </form>

      <!-- Help Section -->
      <div class="help-section">
        <div class="help-item">
          <i class="pi pi-question-circle"></i>
          <div>
            <strong>¿Olvidaste tu contraseña?</strong>
            <p>Contacta a nuestro equipo de soporte</p>
          </div>
        </div>
        <div class="help-item">
          <i class="pi pi-info-circle"></i>
          <div>
            <strong>¿Eres nuevo cliente?</strong>
            <p>Puedes reservar como invitado mientras creamos tu cuenta</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="welcome-footer" [@fadeInUp]>
    <div class="footer-content">
      <div class="company-info">
        <span>© 2024 Sistema de Turnos Professional</span>
      </div>
      <div class="footer-links">
        <a href="#" class="footer-link">Soporte</a>
        <a href="#" class="footer-link">Privacidad</a>
        <a href="#" class="footer-link">Términos</a>
      </div>
    </div>
  </div>
</div>
